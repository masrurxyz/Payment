<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>YAH App</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
        @font-face {
  font-family: 'gff';
  src: url('font.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}
    body {
      margin: 0;
      padding: 0;
      height: 100vh;
      font-family: "gff", sans-serif;
      background: #fff;
    }
    header {
      background: #fff;
      padding: 10px;
      display: flex;
      align-items: center;
    }
    header img {
      width: 70px;
    }
    .divider {
      height: 2px;
      background: #ccc;
      margin: 0;
    }
    .container {
      padding: 10px;
    }
    .card {
      background: white;
      margin: 10px 0;
      padding: 10px;
      border-radius: 8px;
      text-align: center;
      box-shadow: 0 5px 10px rgba(0,0,0,0.2);
    }
    .card img {
      width: 100%;
      max-height: 200px;
      object-fit: cover;
      border-radius: 8px;
    }
    .card button {
      font-family: 'gff', sans-serif;
      margin-top: 10px;
      padding: 10px;
      width: 100%;
      height: 40px;
      background: #E0BA89;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    nav {
      position: fixed;
      bottom: 0;
      width: 100%;
      height: 60px;
      background: #fff;
      display: flex;
      justify-content: space-around;
      box-shadow: 0 5px 10px rgba(0,0,0,0.2);
    }
    nav button {
      flex: 1;
      padding: 10px;
      background: none;
      border: none;
      color: #222831;
      font-size: 18px;
    }
    .popup, .walletPopup, .withdrawPopup {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.5);
      display: none;
      align-items: center;
      justify-content: center;
    }
    .popup-content, .wallet-content, .withdraw-content {
      background: white;
      padding: 20px;
      border-radius: 8px;
      width: 90%;
      max-width: 400px;
      text-align: center;
    }
    .hidden {
      display: none;
    }
    .button {
      font-family: 'gff', sans-serif;
      margin-top: 30px;
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: 12px;
      background-color: #E0BA89;
      color: white;
      font-weight: 600;
      font-size: 16px;
      cursor: pointer;
    }
    .withdraw {
      font-family: 'gff', sans-serif;
      margin-top: 5px;
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: 12px;
      background-color: #393E46;
      color: white;
      font-weight: 600;
      font-size: 16px;
      cursor: pointer;
    }
    .close {
      font-family: 'gff', sans-serif;
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: 12px;
      background-color: #393E46;
      color: white;
      font-weight: 600;
      font-size: 16px;
      cursor: pointer;
    }
    input {
      font-family: 'gff', sans-serif;
      width: 100%;
      max-width: 290px;
      padding: 10px 14px;
      margin-bottom: 20px;
      border: 1px solid #ddd;
      border-radius: 10px;
      font-size: 14px;
    }
     .containerxy {
            text-align: center;
        }

        .scrolling-text {
            margin-top: 20px;
            margin-bottom: 20px;
            white-space: nowrap;
            color: #393E46;
            overflow: hidden;
            display: inline-block;
            width: 100%;
            box-sizing: border-box;
        }

        .scrolling-text span {
            display: inline-block;
            padding-left: 100%;
            animation: scroll-text 10s linear infinite;
        }

        @keyframes scroll-text {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(-100%);
            }
        }
        #helpline {
    position: fixed;
    bottom: 68px;
    right: 20px;
    z-index: 1000;
    cursor: copy;
}

#helpline-img {
    width: 60px;  /* Adjust image size as needed */
    height: 60px;
    cursor: pointer;
    border-radius: 50%;
}
.card button:hover, .button:hover, .withdraw:hover, .close:hover {
    opacity: 0.9;
}

    .tournament-container {
      background: #fff;
      margin-bottom: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      overflow: hidden;
    }
    .tournament-header {
      padding: 15px 20px;
      font-size: 20px;
      font-weight: bold;
      background: #E0BA89;
      color: #fff;
      cursor: pointer;
    }
    .leaderboard {
      padding: 15px;
    }
    .leaderboard input {
      margin-bottom: 10px;
      padding: 8px;
      width: 100%;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      padding: 10px;
      text-align: left;
      border-bottom: 1px solid #ddd;
      cursor: pointer;
    }
    th {
      background: #eee;
    }
    tr:hover {
      background: #f9f9f9;
    }
      .top-right {
    position: fixed;
    top: -15px;
    right: 10px;
    cursor: pointer;
    z-index: 1000;
    background: transparent;
    color: #000000;
    padding: 10px 15px;
    border-radius: 5px;
    user-select: none;
    font-size: 20px;
  }

  .unread-dot {
    display: inline-block;
    width: 10px;
    height: 10px;
    background: red;
    border-radius: 50%;
    margin-left: 5px;
    vertical-align: middle;
  }

  .notification {
    display: none;
    position: fixed;
    top: 60px;
    right: 10px;
    width: 270px;
    background: #fff;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
    padding: 15px;
    border-radius: 8px;
    z-index: 999;
  }

  .notif-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: bold;
    margin-bottom: 10px;
  }

  .close-btn {
    cursor: pointer;
    color: #888;
  }

  .close-btn:hover {
    color: #000;
  }
  </style>
</head>

<body>

<header>
  <img src="yah.png" alt="Logo">
</header>
<div class="divider"></div>

<!-- Sections -->
<div id="home-section" class="container">
  <div class="containerxy">
        <img src="himg.jpg" alt="Image" width="96%" style="border-radius: 10px;">
        <div class="scrolling-text">
            <span>You Can Add Money To Your Account From 10 AM To 10 PM</span>
        </div>
    </div>
  <div class="card">
    <img src="t2.jpg" alt="Tournament">
    <button onclick="openPopup()">PAY & JOIN</button>
  </div>
 <!-- <div class="card">
    <img src="t2.jpg" alt="Tournament">
    <button onclick="openPopup()">PAY & JOIN</button>
  </div> -->
</div>

<div id="tournament-section" class="container hidden">
  <h2>Tournament's Score Board</h2>
  <div id="tournaments">

  <!-- Tournament 1 -->
  <div class="tournament-container">
    <div class="tournament-header" onclick="toggleLeaderboard(this)">Glory Rush</div>
    <div class="leaderboard" style="display:none;">
      <input type="text" onkeyup="filterTable(this, this.nextElementSibling)" placeholder="Search team...">
      <table>
        <thead>
          <tr>
            <th onclick="sortTable(this)">Team Name</th>
            <th onclick="sortTable(this)">Kills</th>
            <th onclick="sortTable(this)">Position</th>
            <th onclick="sortTable(this)">Total Points</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>Team A</td><td>20</td><td>1</td><td>40</td></tr>
          <tr><td>Team B</td><td>15</td><td>2</td><td>35</td></tr>
          <tr><td>Team C</td><td>12</td><td>3</td><td>30</td></tr>
          <tr><td>Team D</td><td>10</td><td>4</td><td>28</td></tr>
          <tr><td>Team E</td><td>8</td><td>5</td><td>26</td></tr>
          <tr><td>Team F</td><td>7</td><td>6</td><td>24</td></tr>
          <tr><td>Team G</td><td>6</td><td>7</td><td>22</td></tr>
          <tr><td>Team H</td><td>5</td><td>8</td><td>20</td></tr>
          <tr><td>Team I</td><td>4</td><td>9</td><td>18</td></tr>
          <tr><td>Team J</td><td>3</td><td>10</td><td>16</td></tr>
          <tr><td>Team K</td><td>2</td><td>11</td><td>14</td></tr>
          <tr><td>Lox</td><td>1</td><td>12</td><td>12</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Add more tournaments the same way -->
  <div class="tournament-container">
    <div class="tournament-header" onclick="toggleLeaderboard(this)">VANGALOS</div>
    <div class="leaderboard" style="display:none;">
      <input type="text" onkeyup="filterTable(this, this.nextElementSibling)" placeholder="Search team...">
      <table>
        <thead>
          <tr>
            <th onclick="sortTable(this)">Team Name</th>
            <th onclick="sortTable(this)">Kills</th>
            <th onclick="sortTable(this)">Position</th>
            <th onclick="sortTable(this)">Total Points</th>
          </tr>
        </thead>
        <tbody>
          <tr><td></td><td></td><td></td><td></td></tr>
          <tr><td></td><td></td><td></td><td></td></tr>
        </tbody>
      </table>
    </div>
  </div>

</div>
</div>

<div id="live-section" class="container hidden">
  <h2>How To Add Money</h2>
   <!--<iframe width="100%" height="250" src="https://www.youtube.com/embed/-eXMZLk45cA?si=JDeoAs_dGk2nbnSE" 
  title="Live Stream" frameborder="0" allowfullscreen></iframe> -->
    <div id="instruction-container" style="padding: 20px; border: 1px solid #ccc; border-radius: 8px; max-width: 400px; background: #E0BA89; color: #fff;">
  <h2>Instructions</h2>
  <p>Step 1: Go To Your Bkash App Or Dial *247# .</p>
  <p>Step 2: Copy The Number Click Send Money And Send The Amount You Want To Add To Our App .</p>
  <p>Step 3: Copy The Transection Number .</p>
  <p>Step 4: Submit The Transaction Number After 2 min & You Are Good To Go .</p>
  <p>Money Adding Time Is 10 AM TO 10 PM</p>
  <div style="display: flex; align-items: center; gap: 10px; margin-top: 10px;">
    <span id="text-to-copy">01885549718</span>
    <button onclick="copyText()" style="padding: 2px 10px; font-family: 'gff', sans-serif;">Copy</button>
  </div>
</div>
</div>

<div id="profile-section" class="container hidden">
  <div id="profileInfo" class="hidden">
    <h3>Profile</h3>
    <p id="profileDetails"></p>
    <p id="walletBalance">Wallet: 0 Taka</p>
    <div id="transactionHistory"></div>
    <button onclick="openWalletPopup()" class="button">Add Money</button><br><br>
    <button onclick="openWithdrawPopup()" class="withdraw">Withdraw</button>
  </div>
  <div id="profilePopup">
    <h3>Create Profile</h3>
    <input type="text" id="username" placeholder="Username"><br><br>
    <input type="password" id="password" placeholder="Password"><br><br>
    <input type="file" id="profilePic"><br><br>
    <button onclick="createProfile()">Create Profile</button>
  </div>
</div>

<!-- Popup for Tournament -->
<div class="popup" id="popup">
  <div class="popup-content">
    <h3>Tournament Details</h3>
    <p>Entry Fee: 50 Taka</p>
    <p>Won Prize: 80 Taka</p>
    <button onclick="registerTournament()" class="button">Register</button><br><br>
    <button onclick="closePopup()" class="close">Close</button>
  </div>
</div>

<!-- Popup for Add Money -->
<div class="walletPopup" id="walletPopup">
  <div class="wallet-content">
    <h3>Add Money</h3>
    <input type="text" id="walletCode" placeholder="Enter Code"><br><br>
    <button onclick="addMoney()" class="button">Add</button><br><br>
    <button onclick="closeWalletPopup()" class="close">Close</button>
  </div>
</div>

<!-- Popup for Withdraw -->
<div class="withdrawPopup" id="withdrawPopup">
  <div class="withdraw-content">
    <h3>Withdraw Money</h3>
    <input type="text" id="bkashNumber" placeholder="bKash Number"><br><br>
    <input type="number" id="withdrawAmount" placeholder="Amount"><br><br>
    <button onclick="submitWithdraw()" class="button">Submit</button><br><br>
    <button onclick="closeWithdrawPopup()" class="close">Close</button>
  </div>
</div>

<div id="helpline">
    <img src="dh.jpg" alt="Helpline" id="helpline-img" onclick="openDiscord()">
</div>

<!-- Notification Icon Button -->
<h3 class="top-right" id="notifBtn" onclick="openNotification()">
  <i class="fas fa-bell"></i>
  <span class="unread-dot"></span>
</h3>

<!-- Notification Box -->
<div class="notification" id="notificationBox">
  <div class="notif-header">
    <span>Notifications</span>
    <i class="fas fa-times close-btn" onclick="closeNotification()"></i>
  </div>
  <p><b>VANGALOS</b> Registration Will Start Tomorrow.</p>
  <p><b>Glory Rush</b> Round1 Match Will Start Tomorrow.</p>
  <p><b>ESRD Game Division</b> Cooking About There LAN.</p>
</div>


<!-- Bottom Navigation -->
<nav>
  <button onclick="showHome()"><i class="fa-solid fa-list-ol"></i></button>
  <button onclick="showTournament()"><i class="fas fa-trophy"></i></button>
  <button onclick="showLive()"><i class="fa-solid fa-circle-question"></i></button>
  <button onclick="showProfile()"><i class="fa-solid fa-fingerprint"></i></button>
</nav>

<script>
// Initialize data from localStorage or defaults
let userProfile = JSON.parse(localStorage.getItem('userProfile')) || null;
let walletBalance = parseInt(localStorage.getItem('walletBalance')) || 0;
let registrations = parseInt(localStorage.getItem('registrations')) || 0;
let totalSpent = parseInt(localStorage.getItem('totalSpent')) || 0;
let transactionHistory = JSON.parse(localStorage.getItem('transactionHistory')) || [];
let usedCodes = JSON.parse(localStorage.getItem('usedCodes')) || [];

function openPopup() {
  if (!userProfile) {
    Swal.fire('Create Profile', 'Please create your profile first to continue.', 'warning');
    showProfile();
  } else {
    document.getElementById('popup').style.display = 'flex';
  }
}

function closePopup() {
  document.getElementById('popup').style.display = 'none';
}

function openWalletPopup() {
  document.getElementById('walletPopup').style.display = 'flex';
}

function closeWalletPopup() {
  document.getElementById('walletPopup').style.display = 'none';
}

function openWithdrawPopup() {
  document.getElementById('withdrawPopup').style.display = 'flex';
}

function closeWithdrawPopup() {
  document.getElementById('withdrawPopup').style.display = 'none';
}

function registerTournament() {
  if (walletBalance >= 50) {
    walletBalance -= 50;
    registrations += 1;
    totalSpent += 50;
    transactionHistory.push(`-50 Taka for Tournament`);

    localStorage.setItem('walletBalance', walletBalance);
    localStorage.setItem('registrations', registrations);
    localStorage.setItem('totalSpent', totalSpent);
    localStorage.setItem('transactionHistory', JSON.stringify(transactionHistory));

    Swal.fire({
      title: 'Success!',
      text: 'Tournament Registration Complete!',
      icon: 'success',
      confirmButtonText: 'Go to Tournament Page'
    }).then((result) => {
      if (result.isConfirmed) {
        window.location.href = 'https://discord.gg/A3zZtFd5ND'; // <-- Change this to your tournament page
      }
    });

    closePopup();
    updateProfileDashboard();
  } else {
    Swal.fire('Insufficient Balance', 'Please add money to your wallet.', 'error');
  }
}

function createProfile() {
  const username = document.getElementById('username').value.trim();
  const password = document.getElementById('password').value.trim();
  const profilePic = document.getElementById('profilePic').files[0];

  if (username && password && profilePic) {
    userProfile = { username, password };
    localStorage.setItem('userProfile', JSON.stringify(userProfile));
    localStorage.setItem('walletBalance', walletBalance);
    Swal.fire('Success!', 'Profile Created Successfully!', 'success');
    updateProfileDashboard();
    showProfile();
  } else {
    Swal.fire('Warning', 'Please fill all fields!', 'warning');
  }
}

function addMoney() {
  const code = document.getElementById('walletCode').value.trim();

  if (usedCodes.includes(code)) {
    Swal.fire('Warning', 'You have already used this code!', 'warning');
    return;
  }

  if (code === 'CE13R6B5BD') {
    walletBalance += 1000;
    transactionHistory.push(`+1000 Taka Added (Administrator)`);

    usedCodes.push(code);
    localStorage.setItem('usedCodes', JSON.stringify(usedCodes));
    localStorage.setItem('walletBalance', walletBalance);
    localStorage.setItem('transactionHistory', JSON.stringify(transactionHistory));

    Swal.fire('Success!', 'Money Added Successfully!', 'success');
    closeWalletPopup();
    updateProfileDashboard();
  } else {
    Swal.fire('Error', 'Invalid Code!', 'error');
  }
}

function submitWithdraw() {
  const number = document.getElementById('bkashNumber').value.trim();
  const amount = parseInt(document.getElementById('withdrawAmount').value.trim());

  if (!number || !amount) {
    Swal.fire('Warning', 'Please fill all fields!', 'warning');
    return;
  }
  if (amount > walletBalance) {
    Swal.fire('Error', 'You cannot withdraw more than your balance!', 'error');
    return;
  }

  Swal.fire({
    title: 'Submitting...',
    text: 'Please wait while we process your withdrawal request.',
    allowOutsideClick: false,
    didOpen: () => {
      Swal.showLoading();
    }
  });

  fetch('https://sheetdb.io/api/v1/2prhuuz399aja', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      data: [
        {
          bkash: number,
          amount: amount
        }
      ]
    })
  })
  .then(response => response.json())
  .then(data => {
    Swal.fire('Request Sent!', 'Withdrawal Request Submitted Successfully.', 'success');
    walletBalance -= amount;
    transactionHistory.push(`- ${amount} Taka Withdrawn`);
    localStorage.setItem('walletBalance', walletBalance);
    localStorage.setItem('transactionHistory', JSON.stringify(transactionHistory));
    updateProfileDashboard();
    closeWithdrawPopup();
  })
  .catch(error => {
    console.error('Error:', error);
    Swal.fire('Error', 'Something went wrong. Try again later.', 'error');
  });
}

function updateProfileDashboard() {
  if (userProfile) {
    document.getElementById('profilePopup').classList.add('hidden');
    document.getElementById('profileInfo').classList.remove('hidden');
    document.getElementById('profileDetails').innerHTML = `
      Username: ${userProfile.username}<br><br>
      <strong>Dashboard:</strong><br>
      Total Registrations: ${registrations}<br>
      Total Spent: ${totalSpent} Taka<br>
    `;
    document.getElementById('walletBalance').innerText = `Wallet: ${walletBalance} Taka`;

    let historyHTML = '<br><strong>Transaction History:</strong><br>';
    transactionHistory.forEach(item => {
      historyHTML += `${item}<br>`;
    });
    document.getElementById('transactionHistory').innerHTML = historyHTML;
  }
}

function showHome() {
  hideAll();
  document.getElementById('home-section').classList.remove('hidden');
}

function showTournament() {
  hideAll();
  document.getElementById('tournament-section').classList.remove('hidden');
}

function showLive() {
  hideAll();
  document.getElementById('live-section').classList.remove('hidden');
}

function showProfile() {
  hideAll();
  document.getElementById('profile-section').classList.remove('hidden');
  updateProfileDashboard();
}

function hideAll() {
  document.getElementById('home-section').classList.add('hidden');
  document.getElementById('tournament-section').classList.add('hidden');
  document.getElementById('live-section').classList.add('hidden');
  document.getElementById('profile-section').classList.add('hidden');
}

// Initial load
if (userProfile) {
  updateProfileDashboard();
}

</script>
<script>
function copyText() {
  const text = document.getElementById('text-to-copy').innerText;
  navigator.clipboard.writeText(text)
    .then(() => {
      Swal.fire({
        title: 'Success!',
        text: 'Number copied to clipboard!',
        icon: 'success',
        confirmButtonText: 'OK'
      });
    })
    .catch(err => {
      console.error('Failed to copy: ', err);
      Swal.fire({
        title: 'Error!',
        text: 'Failed to copy the text.',
        icon: 'error',
        confirmButtonText: 'OK'
      });
    });
}
</script>
<script>
  function openDiscord() {
    const discordLink = "https://discord.gg/FCpkV72Dgm";  // Replace with your actual Discord link
    const isAppAvailable = window.navigator && window.navigator.share;

    if (isAppAvailable) {
        window.location.href = discordLink; // Will redirect to the Discord app if available
    } else {
        window.open(discordLink, "_blank"); // Will open Discord link in a new tab if the app isn't available
    }
}

</script>

<script>
  function toggleLeaderboard(headerElement) {
    const container = headerElement.parentElement;
    const leaderboard = container.querySelector('.leaderboard');
    const isVisible = leaderboard.style.display === 'block';

    // Close all
    document.querySelectorAll('.leaderboard').forEach(lb => lb.style.display = 'none');

    // Open current
    leaderboard.style.display = isVisible ? 'none' : 'block';
  }

  function filterTable(input, table) {
    const filter = input.value.toLowerCase();
    const rows = table.querySelectorAll("tbody tr");

    rows.forEach(row => {
      const text = row.textContent.toLowerCase();
      row.style.display = text.includes(filter) ? "" : "none";
    });
  }

  function sortTable(header) {
    const table = header.closest("table");
    const tbody = table.querySelector("tbody");
    const index = Array.from(header.parentNode.children).indexOf(header);
    const rows = Array.from(tbody.querySelectorAll("tr"));
    const ascending = !header.classList.contains("asc");

    // Remove existing sort classes
    table.querySelectorAll("th").forEach(th => th.classList.remove("asc", "desc"));
    header.classList.add(ascending ? "asc" : "desc");

    rows.sort((a, b) => {
      const cellA = a.children[index].textContent.trim();
      const cellB = b.children[index].textContent.trim();
      const valA = isNaN(cellA) ? cellA : parseFloat(cellA);
      const valB = isNaN(cellB) ? cellB : parseFloat(cellB);

      return ascending ? (valA > valB ? 1 : -1) : (valA < valB ? 1 : -1);
    });

    tbody.innerHTML = "";
    rows.forEach(row => tbody.appendChild(row));
  }
</script>
<script>
  function openNotification() {
    document.getElementById("notificationBox").style.display = "block";
    document.getElementById("notifBtn").style.display = "none";
  }

  function closeNotification() {
    document.getElementById("notificationBox").style.display = "none";
    const btn = document.getElementById("notifBtn");
    btn.style.display = "block";

    // Remove unread dot
    const dot = btn.querySelector(".unread-dot");
    if (dot) dot.style.display = "none";
  }
</script>

</body>
</html>
